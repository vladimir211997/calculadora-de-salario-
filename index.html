<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Calculadora de Salario y Horas Extras - El Salvador</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
      background-color: #f4f4f4;
      color: #333;
    }
    .container {
      max-width: 400px;
      margin: 0 auto;
      padding: 20px;
      background: #fff;
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }
    h1 {
      text-align: center;
      color: #007BFF;
    }
    h2 {
      color: #333;
    }
    label {
      display: block;
      margin: 10px 0 5px;
    }
    select, input {
      width: 100%;
      padding: 10px;
      margin-bottom: 10px;
      border: 1px solid #ccc;
      border-radius: 4px;
    }
    button {
      width: 100%;
      padding: 10px;
      background-color: #007BFF;
      color: #fff;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }
    button:hover {
      background-color: #0056b3;
    }
    .result {
      margin-top: 20px;
      padding: 10px;
      background-color: #f8f9fa;
      border-radius: 4px;
    }
    .footer {
      text-align: center;
      margin-top: 20px;
      font-size: 14px;
      color: #666;
    }
    .highlight {
      color: green;
      font-weight: bold;
      text-align: center;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Calcula tu Salario y Horas Extras</h1>
    <p class="highlight">Actualizado por Norberto Gutiérrez con nuevas reformas 2025 de renta</p>

    <label for="tipoCalculo">Selecciona el tipo de cálculo:</label>
    <select id="tipoCalculo">
      <option value="salario">Calcular salario neto</option>
      <option value="valorHora">Calcular valor de la hora</option>
      <option value="horaExtra">Calcular horas extras</option>
      <option value="recalculo">Verificar recálculo (junio/diciembre)</option>
    </select>

    <!-- Campos comunes -->
    <div id="salarioFields">
      <label for="tipoSalario">Tipo de salario:</label>
      <select id="tipoSalario">
        <option value="mensual">Mensual</option>
        <option value="quincenal">Quincenal</option>
        <option value="semanal">Semanal</option>
      </select>
      <label for="salarioBruto">Salario bruto:</label>
      <input type="number" id="salarioBruto" placeholder="Ej: 800.00">
    </div>

    <!-- Campos para valor de la hora -->
    <div id="valorHoraFields" style="display: none;">
      <label for="salarioMensual">Salario mensual bruto:</label>
      <input type="number" id="salarioMensual" placeholder="Ej: 800.00">
    </div>

    <!-- Campos para horas extras -->
    <div id="horaExtraFields" style="display: none;">
      <label for="salarioHoraExtra">Salario mensual bruto:</label>
      <input type="number" id="salarioHoraExtra" placeholder="Ej: 800.00">
      <label for="horasExtras">Horas extras trabajadas:</label>
      <input type="number" id="horasExtras" placeholder="Ej: 10">
      <label for="tipoHoraExtra">Tipo de hora extra:</label>
      <select id="tipoHoraExtra">
        <option value="diurna">Diurna</option>
        <option value="nocturna">Nocturna</option>
      </select>
    </div>

    <!-- Campos para recálculo -->
    <div id="recalculoFields" style="display: none;">
      <label for="salarioAnual">Salario mensual promedio:</label>
      <input type="number" id="salarioAnual" placeholder="Ej: 800.00">
      <label for="mesRecalculo">Mes de recálculo:</label>
      <select id="mesRecalculo">
        <option value="junio">Junio</option>
        <option value="diciembre">Diciembre</option>
      </select>
    </div>

    <button onclick="calcular()">Calcular</button>
    <div class="result" id="resultado"></div>
    <p class="footer">Hecho por Norberto Gutiérrez</p>
  </div>

  <script>
    document.getElementById('tipoCalculo').addEventListener('change', function () {
      const tipo = this.value;
      document.getElementById('salarioFields').style.display = tipo === 'salario' ? 'block' : 'none';
      document.getElementById('valorHoraFields').style.display = tipo === 'valorHora' ? 'block' : 'none';
      document.getElementById('horaExtraFields').style.display = tipo === 'horaExtra' ? 'block' : 'none';
      document.getElementById('recalculoFields').style.display = tipo === 'recalculo' ? 'block' : 'none';
      document.getElementById('resultado').innerHTML = '';
    });

    function calcular() {
      const tipo = document.getElementById('tipoCalculo').value;
      if (tipo === 'salario') calcularSalario();
      else if (tipo === 'valorHora') calcularValorHora();
      else if (tipo === 'horaExtra') calcularHoraExtra();
      else if (tipo === 'recalculo') calcularRecalculo();
    }

    function calcularSalario() {
      const tipo = document.getElementById('tipoSalario').value;
      const bruto = parseFloat(document.getElementById('salarioBruto').value);
      if (isNaN(bruto)) return alert("Ingrese un salario válido.");
      const isss = bruto * 0.03;
      const afp = bruto * 0.0725;
      const base = bruto - isss - afp;
      let isr = 0;
      if (tipo === 'mensual') {
        if (base > 550.00 && base <= 895.24) isr = (base - 550.00) * 0.10 + 17.67;
        else if (base > 895.24 && base <= 2038.10) isr = (base - 895.24) * 0.20 + 60.00;
        else if (base > 2038.10) isr = (base - 2038.10) * 0.30 + 288.57;
      } else if (tipo === 'quincenal') {
        if (base > 275.00 && base <= 447.62) isr = (base - 275.00) * 0.10 + 8.83;
        else if (base > 447.62 && base <= 1019.05) isr = (base - 447.62) * 0.20 + 30.00;
        else if (base > 1019.05) isr = (base - 1019.05) * 0.30 + 144.28;
      } else if (tipo === 'semanal') {
        if (base > 137.50 && base <= 223.81) isr = (base - 137.50) * 0.10 + 4.42;
        else if (base > 223.81 && base <= 509.52) isr = (base - 223.81) * 0.20 + 15.00;
        else if (base > 509.52) isr = (base - 509.52) * 0.30 + 72.14;
      }
      const neto = bruto - isss - afp - isr;
      document.getElementById('resultado').innerHTML = `
        <h2>Resultados:</h2>
        <p>Salario bruto: $${bruto.toFixed(2)}</p>
        <p>ISSS (3%): $${isss.toFixed(2)}</p>
        <p>AFP (7.25%): $${afp.toFixed(2)}</p>
        <p>ISR: $${isr.toFixed(2)}</p>
        <p><strong>Salario neto: $${neto.toFixed(2)}</strong></p>`;
    }

    function calcularValorHora() {
      const mensual = parseFloat(document.getElementById('salarioMensual').value);
      if (isNaN(mensual)) return alert("Ingrese un valor válido.");
      const valorHora = mensual / 240;
      document.getElementById('resultado').innerHTML = `
        <h2>Resultados:</h2>
        <p>Valor de la hora: $${valorHora.toFixed(2)}</p>`;
    }

    function calcularHoraExtra() {
      const mensual = parseFloat(document.getElementById('salarioHoraExtra').value);
      const horas = parseFloat(document.getElementById('horasExtras').value);
      const tipo = document.getElementById('tipoHoraExtra').value;
      if (isNaN(mensual) || isNaN(horas)) return alert("Ingrese valores válidos.");
      const horaNormal = mensual / 240;
      let valor = horaNormal * 2;
      if (tipo === 'nocturna') valor += horaNormal * 0.25;
      const pago = valor * horas;
      document.getElementById('resultado').innerHTML = `
        <h2>Resultados:</h2>
        <p>Pago por horas extras: $${pago.toFixed(2)}</p>`;
    }

    function calcularRecalculo() {
      const mensual = parseFloat(document.getElementById('salarioAnual').value);
      const mes = document.getElementById('mesRecalculo').value;
      if (isNaN(mensual)) return alert("Ingrese un valor válido.");
      const meses = mes === 'junio' ? 6 : 12;
      const anual = mensual * meses;
      let isr = 0;
      if (anual <= 6600) isr = 0;
      else if (anual <= 10742.88) isr = (anual - 6600) * 0.10 + 106.02;
      else if (anual <= 24457.20) isr = (anual - 10742.88) * 0.20 + 360;
      else isr = (anual - 24457.20) * 0.30 + 3462.84;
      document.getElementById('resultado').innerHTML = `
        <h2>Resultado del recálculo (${mes.charAt(0).toUpperCase() + mes.slice(1)}):</h2>
        <p>ISR acumulado estimado: $${isr.toFixed(2)}</p>
        <p><strong>Este monto deberá compararse con lo ya retenido para saber si aplicará descuento adicional.</strong></p>`;
    }
  </script>
</body>
</html>
